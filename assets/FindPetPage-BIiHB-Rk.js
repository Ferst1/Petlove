import{u as N,a as g,j as e,r as $,b as q,c as K,A as ee,d as se,e as te,s as B,f as F,g as M,h as R,i as L,k as ae,l as P,m as ne}from"./index-Bx2_2rTz.js";import{r as x}from"./react-vendor-BZdliVqA.js";import{S,P as oe}from"./PetCard-Bh97uhhn.js";import{I as T}from"./index-B9iVpkjT.js";import{A as I,m as Q}from"./Modal-D41kO1r0.js";import{B as v}from"./Button-BvAn6XR5.js";import{S as U,R as V,T as le}from"./TypeSelect-CtpSnf-f.js";import{I as D,P as ie}from"./Pagination-CZ5jSi2m.js";import"./hoist-non-react-statics.cjs-2Q9SGLSQ.js";const k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAQCAYAAADwMZRfAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF1SURBVHgBtVM9T8JgEH5bJCGAETcSEu3GQDS600RW48AoLjoiv0D/gMwuruJgwmjZCSzGjTS6EonEiaWxH2nSpq3PmWJqaYsJ4Zb7fvrc3VvGloimaUdsFVFV9ULXdW8ZEJeUBMDE8zye47j3fD5fi6vjWQILAhiPxw3oQ/LZf8U0TQENdWIxm81uyuXyJmnyaSxFUQqRTPymAYoUx3EmoN+B/hRFsU15SZLuLMt6hvmUTqcVqqP6OTvOn/0AaoDGt9Fo1Go2mx9xTLvd7r4gCFcAq8KtYVfyDxMyKJBKpfYqlUojYVpWKpWOgwC/4wSBstlsazgcXkYB9Pv9M8oHAf6AzIFwiYdMJiNGgeRyuRPkb4MACyC+CNjNNAqE4jzP74bjG+EALrNl2/ZLr9erFovFa+xJxGUeZVluIz4Fy9OFnnAAl1Jc1/2iL/qnlmDXkTpH/BX2DsbZZnFCD4n+FcMw7unRBXPkI9ehPFtVsNgCW4d8A6aZ07H6xebUAAAAAElFTkSuQmCC",ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAQCAYAAAD0xERiAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADHSURBVHgBpZIBEYMwDEVbFCABCZVQKZWChDnYHKwOZgEHw0Fx0CVc2GVdgDb8uxzQn7zL8WsNU865h4eD8lALVLTWzsz35GPfBF40kqDRQb3zv+5QA9RT8LDflSBsTmR6djYWwyNtv25J/ekHCB+RjEHYONBAELxtiRc/RN2MQjiHw/jesW0mo9O8bdlRWpicMzrh3PJNnf3oJiDdgDVxftiLyZyDkhgcJVMFPAS1AKtANcAm0BFQBdoBBjVIAOZLoAL4qAF9AJpmiubflqhXAAAAAElFTkSuQmCC",_=({children:u,isOpen:i,onClose:c,pet:n})=>{const s=N(),p=g(r=>r.favoritePets.pets),A=n?p.some(r=>r._id===n._id):!1,o={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.5,ease:"easeInOut"}},exit:{opacity:0,scale:.8,transition:{duration:.3,ease:"easeInOut"}}},l=r=>{r.key==="Escape"&&c()},a=r=>{r.target===r.currentTarget&&c()},t=()=>{s(A?$(n):q(n))};return x.useLayoutEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[]),x.useLayoutEffect(()=>{i?document.body.style.overflow="hidden":document.body.style.overflow="unset"},[i]),e.jsx(I,{children:i&&n&&e.jsx("div",{className:"backdrop",onClick:a,children:e.jsx(Q.div,{className:"modal-window",initial:"hidden",animate:"visible",exit:"exit",variants:o,children:e.jsx("div",{className:"modal-content",children:e.jsxs("div",{className:"pet-info",children:[e.jsx("button",{className:"close-btn",onClick:c,children:e.jsx(T,{size:"24px"})}),e.jsx("img",{src:n.imgURL,alt:n.title}),e.jsx("p",{className:"category_modal",children:n.category}),e.jsx("h2",{children:n.title}),e.jsxs("div",{className:"name-rating",children:[e.jsx("img",{className:"star",src:S}),e.jsx("img",{className:"star",src:S}),e.jsx("img",{className:"star",src:S}),e.jsx("img",{className:"star",src:k}),e.jsx("img",{className:"star",src:k}),e.jsx("p",{children:n.popularity})]}),e.jsxs("div",{className:"info_item",children:[e.jsxs("p",{children:[e.jsx("div",{className:"label",children:"Name:"})," ",n.name]}),e.jsxs("p",{children:[e.jsx("div",{className:"label",children:"Birthday:"})," ",n.birthday]}),e.jsxs("p",{children:[e.jsx("div",{className:"label",children:"Sex:"})," ",n.sex]}),e.jsxs("p",{children:[e.jsx("div",{className:"label",children:"Species:"})," ",n.species]})]}),e.jsx("p",{className:"comment",children:n.comment}),e.jsxs("div",{className:"buttons_modal",children:[e.jsx(v,{text:A?"Remove from favorites":"Add to favorites",className:"primary",onClick:t,children:e.jsx("img",{src:ce,alt:"Heart",className:"button-icon"})}),e.jsx(v,{text:"Contact",className:"primary"})]})]})})})})})},re="/assets/avatar-dog-BZf1xWKu.png",G=({isOpen:u,onClose:i})=>{K();const c=s=>{s.key==="Escape"&&i()},n=s=>{s.target===s.currentTarget&&i()};return x.useLayoutEffect(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}),[]),x.useLayoutEffect(()=>{u?document.body.style.overflow="hidden":document.body.style.overflow="unset"},[u]),e.jsx(I,{children:u&&e.jsx("div",{className:"backdrop",onClick:n,children:e.jsx(Q.div,{"data-aos":"fade-up","data-aos-delay":"100",className:"modal-window",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("button",{className:"close-btn",onClick:i,children:e.jsx(T,{size:"24px"})}),e.jsx("img",{src:re,alt:"avatar pet"}),e.jsx("h3",{children:"Attention"}),e.jsx("p",{children:"We would like to remind you that certain functionality is available only to authorized users. If you have an account, please log in with your credentials. If you do not already have an account, you must register to access these features."}),e.jsx("div",{className:"buttons_modal",children:e.jsx(ee,{})})]})})})})},de=({pets:u,loading:i})=>{const[c,n]=x.useState(null),[s,p]=x.useState(!1),A=N(),{user:o}=g(t=>t.user),l=t=>{o?(n(t),A(se(t))):p(!0)},a=()=>{n(null),p(!1)};return e.jsxs("div",{className:"find_pets_card_wrapper",children:[e.jsx("div",{className:"find_pets_card",children:i?e.jsx("p",{children:"Loading..."}):u.map(t=>e.jsx(oe,{pet:t,openModal:l},t._id))}),c&&e.jsxs(_,{isOpen:c!==null,onClose:a,pet:c,children:[e.jsx("h2",{children:c.title}),e.jsx("button",{onClick:a,children:"Close Modal"})]}),e.jsx(G,{isOpen:s,onClose:a})]})},ue=["found","free","lost","sell"],he=({onChange:u})=>{const[i,c]=x.useState(null),n=s=>{c(s),u(s?s.value:"")};return e.jsx(U,{value:i,onChange:n,options:ue.map(s=>({value:s,label:s})),isSearchable:!0,placeholder:"Category",isClearable:!0,styles:V})},me=["female","male","multiple","unknown"],pe=({onChange:u})=>{const[i,c]=x.useState(null),n=s=>{c(s),u(s?s.value:"")};return e.jsx(U,{value:i,onChange:n,options:me.map(s=>({value:s,label:s})),isSearchable:!0,placeholder:"By gender",isClearable:!0,styles:V})},Ae=({onChange:u})=>{const[i,c]=x.useState([]),[n,s]=x.useState([]);x.useEffect(()=>{(async()=>{try{const t=(await te.get("/api/locations")).data.map(r=>({value:`${r.stateEn} ${r.cityEn} ${r.countyEn}`,label:`${r.stateEn}, ${r.cityEn} (${r.countyEn})`}));c(t),s(t)}catch(a){console.error("Error fetching locations:",a)}})()},[]);const p=l=>{const a=i.filter(t=>t.label.toLowerCase().includes(l.toLowerCase()));s(a),u(l)},A=()=>{s(i),u("")},o=l=>{s([]),u(l.value)};return e.jsxs("div",{children:[e.jsx(D,{onSearch:p,onClear:A}),n.length>0&&e.jsx("ul",{className:"dropdown-menu",children:n.map((l,a)=>e.jsx("li",{onClick:()=>o(l),className:"dropdown-item",children:l.label},a))})]})},xe=({categories:u,genders:i,types:c,locations:n,onSearch:s,onClear:p,onCategoryChange:A,onGenderChange:o,onTypeChange:l,onLocationChange:a})=>{const[t,r]=x.useState(""),h=N(),y=m=>{h(B(m)),A(m)},j=m=>{h(F(m)),o(m)},f=m=>{h(M(m)),l(m)},w=m=>{h(R(m)),a(m)},C=m=>{t===m?(r(""),h(L(""))):(r(m),h(L(m)))};return e.jsxs("div",{className:"search_wrapper",children:[e.jsx(D,{onSearch:s,onClear:p}),e.jsxs("div",{className:"search_field_form",children:[e.jsx(he,{onChange:y,categories:u}),e.jsx(pe,{onChange:j,genders:i}),e.jsx(le,{placeholder:"Type of",onChange:f,types:c}),e.jsx(Ae,{onChange:w,locations:n})]}),e.jsxs("div",{className:"radio_button",children:[e.jsx(v,{text:"Popular",color:"white",isActive:t==="popularity",onClick:()=>C("popularity"),isClearable:t==="popularity",onClear:()=>C("popularity")}),e.jsx(v,{text:"Unpopular",color:"white",isActive:t==="unpopularity",onClick:()=>C("unpopularity"),isClearable:t==="unpopularity",onClear:()=>C("unpopularity")}),e.jsx(v,{text:"Cheap",color:"white",isActive:t==="cheap",onClick:()=>C("cheap"),isClearable:t==="cheap",onClear:()=>C("cheap")}),e.jsx(v,{text:"Expensive",color:"white",isActive:t==="expensive",onClick:()=>C("expensive"),isClearable:t==="expensive",onClear:()=>C("expensive")})]})]})},fe=(u,i,c,n,s,p,A)=>{let o=u;const l=i.toLowerCase();return i&&(o=o.filter(a=>{const{species:t,title:r,name:h,comment:y,sex:j,location:f}=a,w=`${(f==null?void 0:f.stateEn)||""} ${(f==null?void 0:f.cityEn)||""}`.toLowerCase();return t&&t.toLowerCase().includes(l)||r&&r.toLowerCase().includes(l)||h&&h.toLowerCase().includes(l)||y&&y.toLowerCase().includes(l)||j&&j.toLowerCase().includes(l)||w.includes(l)})),c&&(o=o.filter(a=>a.category===c)),n&&(o=o.filter(a=>a.sex===n)),s&&(o=o.filter(a=>a.species===s)),p&&(o=o.filter(a=>`${a.location.stateEn} ${a.location.cityEn}`.toLowerCase().includes(p.toLowerCase()))),A==="popularity"?o=o.slice().sort((a,t)=>t.popularity-a.popularity):A==="unpopularity"?o=o.slice().sort((a,t)=>a.popularity-t.popularity):A==="cheap"?o=o.slice().sort((a,t)=>a.price-t.price):A==="expensive"&&(o=o.slice().sort((a,t)=>t.price-a.price)),o},Ce=["found","free","lost","sell"],ye=["female","male","multiple","unknown"],je=["dog","cat","monkey","bird","snake","turtle","lizard","frog","fish","ants","bees","butterfly","spider","scorpion"],ke=()=>{const{locations:u}=g(d=>d.data),{pets:i,totalItems:c,loading:n,query:s,currentPage:p}=g(d=>d.search),{category:A,gender:o,type:l,location:a}=g(d=>d.filters),{sortBy:t}=g(d=>d.sort),{user:r}=g(d=>d.user),h=N(),y=6,[j,f]=x.useState(!1),[w,C]=x.useState(null);x.useEffect(()=>{h(ae({query:s}))},[h,s]);const m=d=>{h(P(d))},W=()=>{h(P(""))},Z=d=>{h(ne(d))},Y=d=>{h(B(d))},z=d=>{h(F(d))},J=d=>{h(M(d))},H=d=>{h(R(d))},O=d=>{C(d),f(!0)},E=()=>{f(!1),C(null)},b=fe(i,s,A,o,l,a,t),X=b.slice((p-1)*y,p*y);return e.jsxs("div",{className:"container",children:[e.jsxs("section",{className:"find_yor_pets",children:[e.jsx("h2",{children:"Find your favorite pet"}),e.jsx("div",{className:"find_pets_container",children:e.jsx(xe,{categories:Ce,genders:ye,types:je,locations:u,onSearch:m,onClear:W,onCategoryChange:Y,onGenderChange:z,onTypeChange:J,onLocationChange:H})}),e.jsx("div",{className:"pets_section",children:e.jsx(de,{pets:X,loading:n,onPetClick:O})}),e.jsx(ie,{totalItems:b.length,itemsPerPage:y,onPageChange:Z,currentPage:p})]}),r?e.jsx(_,{isOpen:j,onClose:E,pet:w}):e.jsx(G,{isOpen:j,onClose:E})]})};export{ke as default};
